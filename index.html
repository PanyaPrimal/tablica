<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <title>
            Progress of skills info
        </title>
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>
        <div class="wrapper">
            <div class="table-page">	
                <div class="table-page__side-menu side-menu">
                    <object class="side-menu__buttons-section" type="text/html" data="side-buttons.html"></object>
                </div>
                <div class="table-page__content table-section">
                        <h1 class="table-section__title title">
                            История одного Виктора
                        </h1>
                        <table class="table-section__table" id="tbody" cellspacing="0" cellpadding="0">
                            <tr id="tableHeader">
                                <th>Дата</th>
                                <th>Тема</th>
                                <th>Начало</th>
                                <th>Окончание</th>
                                <th>Длительность</th>
                            </tr>
                        </table>
                </div>
            </div>
        </div>
        <script> 
        
            function generateTable() {
                const tableBody = document.querySelector('#tbody>tbody');
                let list = JSON.parse(localStorage.getItem('list'));
                tableBody.setAttribute("id","tableRow");
                
                list = list ? list : [];

                list.forEach((item, index) => {
                    let deleteButton = document.createElement('button');
                    deleteButton.setAttribute("id","deleteButton");
                    deleteButton.innerHTML = 'x';
                    deleteButton.onclick = function(){
                       if (confirm('You really want to delete this activity?')) {
                            list.splice(index, 1);
                            localStorage.setItem('list', JSON.stringify(list));
                            location.reload();
                       }
                       return false;
                    };

                    let tr = document.createElement('tr');
                    let tdDate = document.createElement('td');
                    let tdText = document.createElement('td');
                    let tdStart = document.createElement('td');
                    let tdEnd = document.createElement('td');
                    let tdDuration = document.createElement('td');
                    tdDate.innerHTML = item.date;
                    tdText.innerHTML = item.text;
                    tdStart.innerHTML = item.start;
                    tdEnd.innerHTML = item.end;
                    tdDuration.innerHTML = item.duration;
                    
                    let tdActions = document.createElement('td');
                    tdActions.appendChild(deleteButton);
                    
                    tr.appendChild(tdDate);
                    tr.appendChild(tdText);
                    tr.appendChild(tdStart);
                    tr.appendChild(tdEnd);
                    tr.appendChild(tdDuration);
                    tr.appendChild(tdActions);
                    
                    tableBody.appendChild(tr);
                })
            };

            generateTable();
            
        </script>
        <!--<script src="js/formPageEvents.js">
        
        
        -->
    </body>
</html>